const path=require("path"),fs=require("fs"),AssetClean=require("./assetClean"),projDir=path.resolve(__dirname,"../../../"),assetDir=path.resolve(__dirname,"../../../assets/"),buildDir=path.resolve(__dirname,"../../../build/"),CheckType={Size:0,Unuse:1};async function callProcess(e){let s=await Editor.Profile.getProject("assetclean","assetDir"),t=(s=s||assetDir,await Editor.Profile.getProject("assetclean","outDir")),a=(t=t||buildDir,fs.existsSync(t)||(fs.mkdirSync(t),console.log("Success to mkdir: ",t)),"-size"),r=path.join(t,"asset.txt");e==CheckType.Unuse&&(a="-unuse",r=path.join(t,"unuse.txt")),AssetClean.start(s,r,a)}module.exports={methods:{async checkAssetSize(){callProcess(CheckType.Size)},async checkAssetUnuse(){callProcess(CheckType.Unuse)},showPanel(){Editor.Panel.open("assetclean.setPathPanel")}}};